<Window x:Class="SubtitleOverlay.Windows.OCRParameterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="OCR Parameter Adjustment" Height="700" Width="600"
        WindowStartupLocation="CenterOwner" ResizeMode="CanResize">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Adjust OCR Parameters for Better Text Recognition" 
                       FontSize="16" FontWeight="Bold" Margin="0,0,0,5"/>
            <TextBlock Text="Fine-tune these parameters to improve text recognition for your selected area." 
                       Foreground="Gray" TextWrapping="Wrap"/>
        </StackPanel>
        
        <!-- Parameter Controls -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                
                <!-- Image Preprocessing Section -->
                <GroupBox Header="Image Preprocessing" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Contrast" FontWeight="Bold" Margin="0,5,0,0"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="ContrastSlider" Grid.Column="0" Minimum="0.5" Maximum="2.0" 
                                    Value="1.0" TickFrequency="0.1" IsSnapToTickEnabled="True" 
                                    ValueChanged="Slider_ValueChanged"/>
                            <TextBlock x:Name="ContrastValue" Grid.Column="1" Text="1.0" 
                                       VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                        
                        <TextBlock Text="Brightness" FontWeight="Bold" Margin="0,10,0,0"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="BrightnessSlider" Grid.Column="0" Minimum="-1.0" Maximum="1.0" 
                                    Value="0.0" TickFrequency="0.1" IsSnapToTickEnabled="True" 
                                    ValueChanged="Slider_ValueChanged"/>
                            <TextBlock x:Name="BrightnessValue" Grid.Column="1" Text="0.0" 
                                       VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                        
                        <TextBlock Text="Sharpness" FontWeight="Bold" Margin="0,10,0,0"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="SharpnessSlider" Grid.Column="0" Minimum="0.5" Maximum="2.0" 
                                    Value="1.0" TickFrequency="0.1" IsSnapToTickEnabled="True" 
                                    ValueChanged="Slider_ValueChanged"/>
                            <TextBlock x:Name="SharpnessValue" Grid.Column="1" Text="1.0" 
                                       VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                        
                        <CheckBox x:Name="NoiseReductionCheckBox" Content="Enable Noise Reduction" 
                                  IsChecked="True" Margin="0,10,0,0"/>
                        <CheckBox x:Name="DeskewCheckBox" Content="Enable Deskew" 
                                  IsChecked="True" Margin="0,5,0,0"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Text Recognition Section -->
                <GroupBox Header="Text Recognition" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Minimum Confidence" FontWeight="Bold" Margin="0,5,0,0"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="ConfidenceSlider" Grid.Column="0" Minimum="0.0" Maximum="1.0" 
                                    Value="0.6" TickFrequency="0.1" IsSnapToTickEnabled="True" 
                                    ValueChanged="Slider_ValueChanged"/>
                            <TextBlock x:Name="ConfidenceValue" Grid.Column="1" Text="0.6" 
                                       VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                        
                        <TextBlock Text="Text Scale Factor" FontWeight="Bold" Margin="0,10,0,0"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="ScaleFactorSlider" Grid.Column="0" Minimum="0.5" Maximum="3.0" 
                                    Value="1.0" TickFrequency="0.1" IsSnapToTickEnabled="True" 
                                    ValueChanged="Slider_ValueChanged"/>
                            <TextBlock x:Name="ScaleFactorValue" Grid.Column="1" Text="1.0" 
                                       VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                        
                        <TextBlock Text="Minimum Text Height (pixels)" FontWeight="Bold" Margin="0,10,0,0"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="MinHeightSlider" Grid.Column="0" Minimum="4" Maximum="20" 
                                    Value="8" TickFrequency="1" IsSnapToTickEnabled="True" 
                                    ValueChanged="Slider_ValueChanged"/>
                            <TextBlock x:Name="MinHeightValue" Grid.Column="1" Text="8" 
                                       VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                        
                        <TextBlock Text="Maximum Text Height (pixels)" FontWeight="Bold" Margin="0,10,0,0"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="MaxHeightSlider" Grid.Column="0" Minimum="50" Maximum="300" 
                                    Value="100" TickFrequency="10" IsSnapToTickEnabled="True" 
                                    ValueChanged="Slider_ValueChanged"/>
                            <TextBlock x:Name="MaxHeightValue" Grid.Column="1" Text="100" 
                                       VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                        
                        <CheckBox x:Name="WordSegmentationCheckBox" Content="Enable Word Segmentation" 
                                  IsChecked="True" Margin="0,10,0,0"/>
                        <CheckBox x:Name="LineSegmentationCheckBox" Content="Enable Line Segmentation" 
                                  IsChecked="True" Margin="0,5,0,0"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Language and Character Set Section -->
                <GroupBox Header="Language and Character Set" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Language" FontWeight="Bold" Margin="0,5,0,0"/>
                        <ComboBox x:Name="LanguageComboBox" Margin="0,5,0,0" SelectionChanged="LanguageComboBox_SelectionChanged">
                            <ComboBoxItem Content="English (US)" Tag="en-US" IsSelected="True"/>
                            <ComboBoxItem Content="English (UK)" Tag="en-GB"/>
                            <ComboBoxItem Content="Spanish" Tag="es-ES"/>
                            <ComboBoxItem Content="French" Tag="fr-FR"/>
                            <ComboBoxItem Content="German" Tag="de-DE"/>
                            <ComboBoxItem Content="Chinese (Simplified)" Tag="zh-CN"/>
                            <ComboBoxItem Content="Japanese" Tag="ja-JP"/>
                            <ComboBoxItem Content="Korean" Tag="ko-KR"/>
                        </ComboBox>
                        
                        <CheckBox x:Name="NumberRecognitionCheckBox" Content="Enable Number Recognition" 
                                  IsChecked="True" Margin="0,10,0,0"/>
                        <CheckBox x:Name="SymbolRecognitionCheckBox" Content="Enable Symbol Recognition" 
                                  IsChecked="True" Margin="0,5,0,0"/>
                        <CheckBox x:Name="PunctuationRecognitionCheckBox" Content="Enable Punctuation Recognition" 
                                  IsChecked="True" Margin="0,5,0,0"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Advanced Section -->
                <GroupBox Header="Advanced Settings" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <CheckBox x:Name="BinarizationCheckBox" Content="Enable Binarization" 
                                  IsChecked="False" Margin="0,5,0,0" Checked="BinarizationCheckBox_Changed" Unchecked="BinarizationCheckBox_Changed"/>
                        
                        <TextBlock Text="Binarization Threshold" FontWeight="Bold" Margin="0,10,0,0"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                            </Grid.ColumnDefinitions>
                            <Slider x:Name="BinarizationThresholdSlider" Grid.Column="0" Minimum="0.0" Maximum="1.0" 
                                    Value="0.5" TickFrequency="0.1" IsSnapToTickEnabled="True" 
                                    ValueChanged="Slider_ValueChanged" IsEnabled="False"/>
                            <TextBlock x:Name="BinarizationThresholdValue" Grid.Column="1" Text="0.5" 
                                       VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                        
                        <CheckBox x:Name="MorphologicalOperationsCheckBox" Content="Enable Morphological Operations" 
                                  IsChecked="False" Margin="0,10,0,0"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Preset Buttons -->
                <GroupBox Header="Quick Presets" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Apply optimized settings for common scenarios:" 
                                   Margin="0,0,0,5" Foreground="Gray"/>
                        <WrapPanel>
                            <Button Content="Default" Width="80" Margin="0,0,5,0" Click="DefaultButton_Click"/>
                            <Button Content="Small Text" Width="80" Margin="0,0,5,0" Click="SmallTextButton_Click"/>
                            <Button Content="Large Text" Width="80" Margin="0,0,5,0" Click="LargeTextButton_Click"/>
                            <Button Content="Low Contrast" Width="80" Margin="0,0,5,0" Click="LowContrastButton_Click"/>
                        </WrapPanel>
                    </StackPanel>
                </GroupBox>
                
                <!-- Description -->
                <GroupBox Header="Area Description" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Description (optional):" Margin="0,0,0,5"/>
                        <TextBox x:Name="DescriptionTextBox" Height="60" TextWrapping="Wrap" 
                                 AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                                 Text="OCR parameters for selected area"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Test Results -->
                <GroupBox Header="Test Results" Margin="0,0,0,10" x:Name="TestResultsGroupBox" Visibility="Collapsed">
                    <StackPanel Margin="5">
                        <TextBlock Text="OCR Test Result:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="TestResultTextBox" Height="80" TextWrapping="Wrap" 
                                 AcceptsReturn="True" VerticalScrollBarVisibility="Auto" IsReadOnly="True"
                                 Background="LightGray"/>
                        <TextBlock x:Name="TestStatusText" Margin="0,5,0,0" FontStyle="Italic"/>
                    </StackPanel>
                </GroupBox>
                
            </StackPanel>
        </ScrollViewer>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button x:Name="QuickTestButton" Content="Quick Test" Width="80" Margin="0,0,10,0" Click="QuickTestButton_Click"/>
            <Button x:Name="TestButton" Content="Test &amp; Close" Width="100" Margin="0,0,10,0" Click="TestButton_Click"/>
            <Button x:Name="SaveButton" Content="Save &amp; Apply" Width="100" Margin="0,0,10,0" Click="SaveButton_Click" IsDefault="True"/>
            <Button x:Name="CancelButton" Content="Cancel" Width="80" Click="CancelButton_Click" IsCancel="True"/>
        </StackPanel>
        
    </Grid>
</Window>
